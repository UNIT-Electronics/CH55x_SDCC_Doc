<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interrupts &mdash; Documentation CH552 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=d45e8c67"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="I2C (Inter-Integrated Circuit)" href="i2c.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Documentation CH552
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_linux.html">CH55x with SDCC and Ubuntu 23.10</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_windows.html">CH55x with SDCC and Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="compile.html">Compile and Flash CH55x with SDCC</a></li>
<li class="toctree-l1"><a class="reference internal" href="generalboardcontrol.html">General Board Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="adc.html">Analog to Digital Converter (ADC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="pwm.html">PWM (Pulse Width Modulation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="i2c.html">I2C (Inter-Integrated Circuit)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Interrupts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#timer-0-1-interrupts">Timer 0/1  Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#external-interrupts">External Interrupts</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Documentation CH552</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Interrupts</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/interrupts.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="interrupts">
<h1>Interrupts<a class="headerlink" href="#interrupts" title="Link to this heading"></a></h1>
<p>CH552 supports 14 sets of interrupt signal sources, including 6 sets of interrupts (INT0, T0, INT1, T1,
UART0 and T2) compatible with the standard MCS51, and 8 sets of extended interrupts (SPI0, TKEY,
USB, ADC, UART1, PWMX, GPIO and WDOG). The GPIO interrupt can be selected from 7 I/O pins.</p>
<table class="docutils align-default" id="id11">
<caption><span class="caption-text">Default priority sequence of interrupt sources</span><a class="headerlink" href="#id11" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 18.2%" />
<col style="width: 18.2%" />
<col style="width: 9.1%" />
<col style="width: 27.3%" />
<col style="width: 27.3%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Interrupt source</p></th>
<th class="head"><p>Entry address</p></th>
<th class="head"><p>Interrupt No.</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default priority sequence</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>INT_NO_INT0</p></td>
<td><p>0x0003</p></td>
<td><p>0</p></td>
<td><p>External interrupt 0</p></td>
<td><p>High priority</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_TMR0</p></td>
<td><p>0x000B</p></td>
<td><p>1</p></td>
<td><p>Timer 0 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_INT1</p></td>
<td><p>0x0013</p></td>
<td><p>2</p></td>
<td><p>External interrupt 1</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_TMR1</p></td>
<td><p>0x001B</p></td>
<td><p>3</p></td>
<td><p>Timer 1 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_UART0</p></td>
<td><p>0x0023</p></td>
<td><p>4</p></td>
<td><p>UART0 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_TMR2</p></td>
<td><p>0x002B</p></td>
<td><p>5</p></td>
<td><p>Timer 2 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_SPI0</p></td>
<td><p>0x0033</p></td>
<td><p>6</p></td>
<td><p>SPI0 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_TKEY</p></td>
<td><p>0x003B</p></td>
<td><p>7</p></td>
<td><p>Touch key timer interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_USB</p></td>
<td><p>0x0043</p></td>
<td><p>8</p></td>
<td><p>USB interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_ADC</p></td>
<td><p>0x004B</p></td>
<td><p>9</p></td>
<td><p>ADC interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_UART1</p></td>
<td><p>0x0053</p></td>
<td><p>10</p></td>
<td><p>UART1 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_PWMX</p></td>
<td><p>0x005B</p></td>
<td><p>11</p></td>
<td><p>PWM1/PWM2 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_GPIO</p></td>
<td><p>0x0063</p></td>
<td><p>12</p></td>
<td><p>GPIO Interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_WDOG</p></td>
<td><p>0x006B</p></td>
<td><p>13</p></td>
<td><p>Watchdog timer interrupt</p></td>
<td><p>Low priority</p></td>
</tr>
</tbody>
</table>
<p>The interrupt priority is determined by the interrupt number.</p>
<section id="timer-0-1-interrupts">
<h2>Timer 0/1  Interrupts<a class="headerlink" href="#timer-0-1-interrupts" title="Link to this heading"></a></h2>
<p>Timer0 and Timer1 are 16-bit timers/counters configured by TCON and TMOD. TCON is used for
timer/counter T0 and T1 startup control and overflow interrupt as well as external interrupt control. Each
timer is a 16-bit timing unit composed of dual 8-bit registers. The high byte counter of timer 0 is TH0 and
the low byte counter of timer 0 is TL0. The high byte counter of timer 1 is TH1 and the low byte counter of
timer 1 is TL1. Timer 1 can also be used as the baud rate generator of UART0.</p>
<dl>
<dt>code example::</dt><dd><p>void timer0_interrupt(void) __interrupt(INT_NO_TMR0)        /* Timer0 interrupt service routine (ISR) <a href="#id1"><span class="problematic" id="id2">*</span></a>/
{</p>
<blockquote>
<div><p>PIN_toggle(PIN_BUZZER);
TH0 = 0xFF;             /* 50ms timer value <a href="#id3"><span class="problematic" id="id4">*</span></a>/
TL0 = 0x00;</p>
</div></blockquote>
<p>}</p>
<p>int main(void)
{</p>
<blockquote>
<div><p>CLK_config();
DLY_ms(5);
PIN_output(PIN_BUZZER);
EA  = 1;                /* Enable global interrupt <em>/
ET0 = 1;                /</em> Enable timer0 interrupt <a href="#id5"><span class="problematic" id="id6">*</span></a>/</p>
<p>TH0 = 0xFF;             /* 50ms timer value <em>/
TL0 = 0x00;
TMOD = 0x01;            /</em> Timer0 mode1 <em>/
TR0 = 1;                /</em> Start timer0 <a href="#id7"><span class="problematic" id="id8">*</span></a>/
while(1);</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
</section>
<section id="external-interrupts">
<h2>External Interrupts<a class="headerlink" href="#external-interrupts" title="Link to this heading"></a></h2>
<p>INT0 and INT1 are external interrupt input pins. When the external interrupt is triggered, the
corresponding interrupt service routine is executed. The external interrupt is triggered by the
falling edge, rising edge, or both edges of the external interrupt input signal. The external interrupt
input signal is sampled by the external interrupt input pin and the external interrupt is triggered
according to the external interrupt trigger mode.</p>
<dl>
<dt>code example::</dt><dd><p>void ext0_interrupt(void) __interrupt(INT_NO_INT0)
{</p>
<blockquote>
<div><p>PIN_toggle(PIN_LED);</p>
</div></blockquote>
<p>}</p>
<p>int main(void)
{</p>
<blockquote>
<div><p>CLK_config();
DLY_ms(5);
PIN_output_OD(PIN_INT);
PIN_output(PIN_LED);</p>
<p>EA  = 1;     /* Enable global interrupt <a href="#id9"><span class="problematic" id="id10">*</span></a>/
EX0 = 1;    // Enable INT0
IT0 = 1;    // INT0 is edge triggered</p>
<p>while(1)
{</p>
<blockquote>
<div><p>// Do nothing</p>
</div></blockquote>
<p>}</p>
</div></blockquote>
<p>}</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="i2c.html" class="btn btn-neutral float-left" title="I2C (Inter-Integrated Circuit)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Cesar Bautista.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>