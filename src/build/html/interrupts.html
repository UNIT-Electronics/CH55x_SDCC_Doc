<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interrupts &mdash; Cocket Nova Development Board 0.0.1 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=d45e8c67"></script>
        <script src="_static/doctools.js?v=9a2dae69"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script>let toggleHintShow = 'Click to show';</script>
        <script>let toggleHintHide = 'Click to hide';</script>
        <script>let toggleOpenOnPrint = 'true';</script>
        <script src="_static/togglebutton.js?v=4a39c7ea"></script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
        <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="PWM (Pulse Width Modulation)" href="pwm.html" />
    <link rel="prev" title="I2C (Inter-Integrated Circuit)" href="i2c.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            Cocket Nova Development Board
              <img src="_static/Logo-UNIT_Web-04-800x182.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_linux.html">CH55x with SDCC and Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="install_windows.html">CH55x with SDCC and Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="compile.html">Compile and Flash CH55x with SDCC</a></li>
<li class="toctree-l1"><a class="reference internal" href="generalboardcontrol.html">General Board Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="adc.html">Analog to Digital Converter (ADC)</a></li>
<li class="toctree-l1"><a class="reference internal" href="i2c.html">I2C (Inter-Integrated Circuit)</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Interrupts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#timer-0-1-interrupts">Timer 0/1  Interrupts</a></li>
<li class="toctree-l2"><a class="reference internal" href="#external-interrupts">External Interrupts</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="pwm.html">PWM (Pulse Width Modulation)</a></li>
<li class="toctree-l1"><a class="reference internal" href="ws2812.html">WS2812</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Cocket Nova Development Board</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Interrupts</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/interrupts.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="interrupts">
<h1>Interrupts<a class="headerlink" href="#interrupts" title="Link to this heading"></a></h1>
<p>The CH552 microcontroller supports 14 sets of interrupt signal sources. These include 6 sets of interrupts
(INT0, T0, INT1, T1, UART0, and T2), which are compatible with the standard MCS51, and 8 sets of extended
interrupts (SPI0, TKEY, USB, ADC, UART1, PWMX, GPIO, and WDOG). The GPIO interrupt can be chosen from 7 I/O
pins.</p>
<table class="docutils align-default" id="id1">
<caption><span class="caption-number">Table 2 </span><span class="caption-text">Default priority sequence of interrupt sources</span><a class="headerlink" href="#id1" title="Link to this table"></a></caption>
<colgroup>
<col style="width: 20.0%" />
<col style="width: 20.0%" />
<col style="width: 10.0%" />
<col style="width: 30.0%" />
<col style="width: 20.0%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Interrupt src.</p></th>
<th class="head"><p>Entry addr.</p></th>
<th class="head"><p>Interrupt #</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Default prio. seq.</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>INT_NO_INT0</p></td>
<td><p>0x0003</p></td>
<td><p>0</p></td>
<td><p>External interrupt 0</p></td>
<td><p>High priority</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_TMR0</p></td>
<td><p>0x000B</p></td>
<td><p>1</p></td>
<td><p>Timer 0 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_INT1</p></td>
<td><p>0x0013</p></td>
<td><p>2</p></td>
<td><p>External interrupt 1</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_TMR1</p></td>
<td><p>0x001B</p></td>
<td><p>3</p></td>
<td><p>Timer 1 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_UART0</p></td>
<td><p>0x0023</p></td>
<td><p>4</p></td>
<td><p>UART0 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_TMR2</p></td>
<td><p>0x002B</p></td>
<td><p>5</p></td>
<td><p>Timer 2 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_SPI0</p></td>
<td><p>0x0033</p></td>
<td><p>6</p></td>
<td><p>SPI0 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_TKEY</p></td>
<td><p>0x003B</p></td>
<td><p>7</p></td>
<td><p>Touch key timer interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_USB</p></td>
<td><p>0x0043</p></td>
<td><p>8</p></td>
<td><p>USB interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_ADC</p></td>
<td><p>0x004B</p></td>
<td><p>9</p></td>
<td><p>ADC interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_UART1</p></td>
<td><p>0x0053</p></td>
<td><p>10</p></td>
<td><p>UART1 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_PWMX</p></td>
<td><p>0x005B</p></td>
<td><p>11</p></td>
<td><p>PWM1/PWM2 interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-even"><td><p>INT_NO_GPIO</p></td>
<td><p>0x0063</p></td>
<td><p>12</p></td>
<td><p>GPIO Interrupt</p></td>
<td><p>↓</p></td>
</tr>
<tr class="row-odd"><td><p>INT_NO_WDOG</p></td>
<td><p>0x006B</p></td>
<td><p>13</p></td>
<td><p>Watchdog timer interrupt</p></td>
<td><p>Low priority</p></td>
</tr>
</tbody>
</table>
<p>The interrupt priority is determined by the interrupt number.</p>
<section id="timer-0-1-interrupts">
<h2>Timer 0/1  Interrupts<a class="headerlink" href="#timer-0-1-interrupts" title="Link to this heading"></a></h2>
<p>Timer0 and Timer1 are 16-bit timers/counters controlled by TCON and TMOD. TCON is responsible for timer/counter
T0 and T1 startup control, overflow interrupt, and external interrupt control. Each timer consists of dual
8-bit registers forming a 16-bit timing unit. Timer 0’s high byte counter is TH0, and its low byte counter
is TL0. Similarly, Timer 1’s high byte counter is TH1, and its low byte counter is TL1. Timer 1 can also
serve as the baud rate generator for UART0.
code example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">timer0_interrupt</span><span class="p">(</span><span class="n">void</span><span class="p">)</span> <span class="n">__interrupt</span><span class="p">(</span><span class="n">INT_NO_TMR0</span><span class="p">)</span>        <span class="o">/*</span> <span class="n">Timer0</span> <span class="n">interrupt</span> <span class="n">service</span> <span class="n">routine</span> <span class="p">(</span><span class="n">ISR</span><span class="p">)</span> <span class="o">*/</span>
<span class="p">{</span>
    <span class="n">PIN_toggle</span><span class="p">(</span><span class="n">PIN_BUZZER</span><span class="p">);</span>
    <span class="n">TH0</span> <span class="o">=</span> <span class="mh">0xFF</span><span class="p">;</span>             <span class="o">/*</span> <span class="mi">50</span><span class="n">ms</span> <span class="n">timer</span> <span class="n">value</span> <span class="o">*/</span>
    <span class="n">TL0</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
<span class="p">}</span>


<span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">CLK_config</span><span class="p">();</span>
    <span class="n">DLY_ms</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="n">PIN_output</span><span class="p">(</span><span class="n">PIN_BUZZER</span><span class="p">);</span>
    <span class="n">EA</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>                <span class="o">/*</span> <span class="n">Enable</span> <span class="k">global</span> <span class="n">interrupt</span> <span class="o">*/</span>
    <span class="n">ET0</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>                <span class="o">/*</span> <span class="n">Enable</span> <span class="n">timer0</span> <span class="n">interrupt</span> <span class="o">*/</span>

    <span class="n">TH0</span> <span class="o">=</span> <span class="mh">0xFF</span><span class="p">;</span>             <span class="o">/*</span> <span class="mi">50</span><span class="n">ms</span> <span class="n">timer</span> <span class="n">value</span> <span class="o">*/</span>
    <span class="n">TL0</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">;</span>
    <span class="n">TMOD</span> <span class="o">=</span> <span class="mh">0x01</span><span class="p">;</span>            <span class="o">/*</span> <span class="n">Timer0</span> <span class="n">mode1</span> <span class="o">*/</span>
    <span class="n">TR0</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>                <span class="o">/*</span> <span class="n">Start</span> <span class="n">timer0</span> <span class="o">*/</span>
    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="external-interrupts">
<h2>External Interrupts<a class="headerlink" href="#external-interrupts" title="Link to this heading"></a></h2>
<p>INT0 and INT1 are external interrupt input pins. When an external interrupt occurs, the corresponding
interrupt service routine is executed. The external interrupt can be triggered by the falling edge,
rising edge, or both edges of the external interrupt input signal. The trigger mode is determined by the
external interrupt input pin.</p>
<p>code example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">void</span> <span class="n">ext0_interrupt</span><span class="p">(</span><span class="n">void</span><span class="p">)</span> <span class="n">__interrupt</span><span class="p">(</span><span class="n">INT_NO_INT0</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">PIN_toggle</span><span class="p">(</span><span class="n">PIN_LED</span><span class="p">);</span>
<span class="p">}</span>

<span class="nb">int</span> <span class="n">main</span><span class="p">(</span><span class="n">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">CLK_config</span><span class="p">();</span>
    <span class="n">DLY_ms</span><span class="p">(</span><span class="mi">5</span><span class="p">);</span>
    <span class="n">PIN_output_OD</span><span class="p">(</span><span class="n">PIN_INT</span><span class="p">);</span>
    <span class="n">PIN_output</span><span class="p">(</span><span class="n">PIN_LED</span><span class="p">);</span>

    <span class="n">EA</span>  <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>     <span class="o">/*</span> <span class="n">Enable</span> <span class="k">global</span> <span class="n">interrupt</span> <span class="o">*/</span>
    <span class="n">EX0</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>    <span class="o">//</span> <span class="n">Enable</span> <span class="n">INT0</span>
    <span class="n">IT0</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>    <span class="o">//</span> <span class="n">INT0</span> <span class="ow">is</span> <span class="n">edge</span> <span class="n">triggered</span>

    <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="o">//</span> <span class="n">Do</span> <span class="n">nothing</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="i2c.html" class="btn btn-neutral float-left" title="I2C (Inter-Integrated Circuit)" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="pwm.html" class="btn btn-neutral float-right" title="PWM (Pulse Width Modulation)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Cesar Bautista.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>